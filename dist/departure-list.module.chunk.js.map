{"version":3,"sources":["C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/add-departure-modal/add-departure-modal.component.html","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/add-departure-modal/add-departure-modal.component.ts","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list-routing.module.ts","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.component.html","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.component.ts","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.module.ts","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/shared/services/StorageService.ts","C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/shared/storage/LocalClientStorage.ts"],"names":[],"mappings":"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","file":"departure-list.module.chunk.js","sourcesContent":["module.exports = \"\\r\\n<div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title\\\">{{ 'Departure' | translate }}</h4>\\r\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"CloseModal();\\\">\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"address\\\">{{'Address' | translate }}:</label>\\r\\n        <input id=\\\"address\\\" type=\\\"text\\\"\\r\\n               [resultFormatter]=\\\"AddressFormatter\\\"\\r\\n               [inputFormatter]=\\\"AddressFormatter\\\"\\r\\n               class=\\\"form-control\\\"\\r\\n               [class.is-invalid]=\\\"AddressSearchFailed\\\"\\r\\n               [(ngModel)]=\\\"Address\\\"\\r\\n               [ngbTypeahead]=\\\"SearchAddress\\\" />\\r\\n        <span *ngIf=\\\"AddressSearching\\\">{{ 'Searching' | translate }}...</span>\\r\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"AddressSearchFailed\\\"> {{ 'Not found' | translate }}</div>\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"intent\\\">{{ 'Intent' | translate }}</label>\\r\\n        <input id=\\\"intent\\\" type=\\\"text\\\" [(ngModel)]=\\\"_departure.intent\\\" class=\\\"form-control\\\"/>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"CloseModal();\\\">{{ 'Cancel' | translate }}</button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"SaveButtonClick();\\\">{{ 'Save' | translate }}</button>\\r\\n</div>\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/add-departure-modal/add-departure-modal.component.html\n// module id = ../../../../../src/app/layout/departure-list/add-departure-modal/add-departure-modal.component.html\n// module chunks = departure-list.module","import {Component, EventEmitter, Injectable, OnInit, Output} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {DepartureService} from '../../../shared/services/DepartureService';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {Departure} from '../../../shared/models/Departure';\r\nimport {Address} from '../../../shared/models/Address';\r\nimport {AddressService} from '../../../shared/services/AddressService';\r\nimport {HttpClient, HttpParams} from '@angular/common/http';\r\nimport {of} from 'rxjs/observable/of';\r\nimport 'rxjs/add/operator/catch';\r\nimport 'rxjs/add/operator/debounceTime';\r\nimport 'rxjs/add/operator/distinctUntilChanged';\r\nimport 'rxjs/add/operator/do';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/switchMap';\r\nimport 'rxjs/add/operator/merge';\r\nimport {GpsPoint} from '../../../shared/modules/map-module/GpsPoint';\r\nimport {StringDateProvider} from '../../../shared/providers/StringDateProvider';\r\n\r\n@Component({\r\n    selector: 'app-add-departure-modal',\r\n    templateUrl: './add-departure-modal.component.html',\r\n    providers: [ DepartureService, AddressService, StringDateProvider]\r\n})\r\nexport class AddDepartureModalComponent implements OnInit {\r\n\r\n    public _departure: Departure = new Departure();\r\n\r\n    @Output()\r\n    public OnClose: EventEmitter<any> = new EventEmitter();\r\n\r\n    public _address: Address = new Address();\r\n    public AddressSearching = false;\r\n    public AddressSearchFailed = false;\r\n    public hideSearchingAddress = new Observable(() => () => this.AddressSearching = false);\r\n\r\n    public SearchAddress = (text$: Observable<string>) =>\r\n        text$\r\n            .debounceTime(300)\r\n            .distinctUntilChanged()\r\n            .do(() => this.AddressSearching = true)\r\n            .switchMap(term => term === '' ? [] :\r\n                this._addressService.getAddressesStartWith(term)\r\n                    .do(() => this.AddressSearchFailed = false)\r\n                    .catch(() => {\r\n                        this.AddressSearchFailed = true;\r\n                        return of([]);\r\n                    }))\r\n            .do(() => this.AddressSearching = false)\r\n            .merge(this.hideSearchingAddress)\r\n\r\n    public get Address(): Address {\r\n        return this._address;\r\n    }\r\n\r\n    public set Address(value: Address) {\r\n        if ( value === null ) {\r\n            return;\r\n        }\r\n        this._address = value;\r\n        this._departure.address = this._address.label;\r\n        this._departure.gpsPoint = this._address.gpsPoint;\r\n        this._departure.gpsPoint.id = 0;\r\n    }\r\n\r\n\r\n    constructor(private _modalService: NgbActiveModal,\r\n                private _departureService: DepartureService,\r\n                public _addressService: AddressService) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    CloseModal() {\r\n        this._modalService.close();\r\n        this.OnClose.next(null);\r\n    }\r\n\r\n    AddressFormatter (x: Address) {\r\n        return x.label;\r\n    }\r\n\r\n    SaveButtonClick() {\r\n        this._departure.dateTime = new Date(Date.now()).toISOString();\r\n        this._departure.gpsPoint.id = 0;\r\n        this._departureService.addDeparture(this._departure).subscribe(data => {\r\n            this.CloseModal();\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/add-departure-modal/add-departure-modal.component.ts","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport {DepartureListComponent} from './departure-list.component';\r\n\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: DepartureListComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class DepartureListRoutingModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list-routing.module.ts","module.exports = \"<div>\\r\\n    <app-page-header [heading]=\\\"'Departures'  | translate\\\" [icon]=\\\"'fa-mail-forward'\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-link\\\" (click)=\\\"RefreshList();\\\">\\r\\n            <i *ngIf=\\\"!_loading\\\" style=\\\"color: grey;\\\" class=\\\"fa fa-refresh fa-2x\\\"></i>\\r\\n            <i *ngIf=\\\"_loading\\\" style=\\\"color: grey;\\\" class=\\\"fa fa-spin fa-refresh fa-2x\\\"></i>\\r\\n        </button>\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-link\\\" (click)=\\\"ShowAllDepartures();\\\">{{ 'Show all' | translate }}</button>\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"AddButtonClick();\\\">{{ 'Add' | translate }}</button>\\r\\n    </app-page-header>\\r\\n    <div class=\\\"card-body table-responsive\\\">\\r\\n            <ngb-alert *ngIf=\\\"!_hideAlert\\\" type=\\\"info\\\" (close)=\\\"CloseAlert();\\\">\\r\\n                {{ 'Only active are shown.' | translate }}\\r\\n            </ngb-alert>\\r\\n        <table class=\\\"table\\\">\\r\\n            <thead>\\r\\n            <tr>\\r\\n                <th>{{ 'Address' | translate }}</th>\\r\\n                <th>{{ 'Time' | translate }}</th>\\r\\n                <th>{{ 'Intent' | translate }}</th>\\r\\n                <th></th>\\r\\n            </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n            <tr *ngFor=\\\"let dep of _departures\\\">\\r\\n                <td>{{ dep.address}}</td>\\r\\n                <td>{{ dep.dateTime | amFromUtc | amLocal | amDateFormat: 'YYYY-MM-DD HH:mm' }}</td>\\r\\n                <td>{{ dep.intent}}</td>\\r\\n                <td>\\r\\n                    <button type=\\\"button\\\" class=\\\"btn btn-info\\\" (click)=\\\"ManageButtonClick(dep);\\\">{{ 'Manage' | translate }}</button>\\r\\n                </td>\\r\\n            </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.component.html\n// module id = ../../../../../src/app/layout/departure-list/departure-list.component.html\n// module chunks = departure-list.module","import {Component, OnInit} from '@angular/core';\r\nimport {NgbModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {routerTransition} from '../../router.animations';\r\nimport {FireCar} from '../../shared/models/FireCar';\r\nimport {StorageService} from '../../shared/services/StorageService';\r\nimport {Departure} from '../../shared/models/Departure';\r\nimport {DepartureService} from '../../shared/services/DepartureService';\r\nimport {FireCarFormComponent} from '../firecar/firecar-form/firecar-form.component';\r\nimport {AddDepartureModalComponent} from './add-departure-modal/add-departure-modal.component';\r\nimport {Router} from '@angular/router';\r\n\r\n\r\n@Component({\r\n    selector: 'app-departure-list',\r\n    templateUrl: './departure-list.component.html',\r\n    providers: [DepartureService, StorageService, NgbModal]\r\n})\r\n\r\nexport class DepartureListComponent implements OnInit {\r\n    private readonly _departureAlert = 'departure_alert';\r\n    public _hideAlert: boolean;\r\n    public _loading = false;\r\n\r\n    public fireCarsList: FireCar[] = [];\r\n    public _departures: Departure[] = [];\r\n\r\n    constructor(private _departureService: DepartureService,\r\n                private _storage: StorageService,\r\n                private _modalService: NgbModal,\r\n                private router: Router ) {\r\n        const alert = _storage.GetLocalAsBoolean(this._departureAlert);\r\n        this._hideAlert = alert;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.RefreshList();\r\n    }\r\n\r\n    RefreshList() {\r\n        this._loading = true;\r\n        this._departureService.getDepartures().subscribe(data => {\r\n            this._departures = data;\r\n            this._loading = false;\r\n        });\r\n    }\r\n\r\n    AddButtonClick() {\r\n        const modalRef = this._modalService.open(AddDepartureModalComponent);\r\n        const form = modalRef.componentInstance;\r\n        form.OnClose.subscribe(e => {\r\n            this.RefreshList();\r\n        });\r\n    }\r\n\r\n    CloseAlert() {\r\n        this._hideAlert = true;\r\n        this._storage.SetLocalData('departure_alert', this._hideAlert.toString());\r\n    }\r\n\r\n    ManageButtonClick(dep: Departure) {\r\n        this.router.navigate(\r\n            ['/departure', dep.id]);\r\n    }\r\n\r\n    ShowAllDepartures() {\r\n        this._loading = true;\r\n        this._departureService.getDepartures(true).subscribe(data => {\r\n            this._departures = data;\r\n            this._loading = false;\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { NgbModule} from '@ng-bootstrap/ng-bootstrap';\r\n\r\nimport { PageHeaderModule } from '../../shared/';\r\nimport {DepartureListComponent} from './departure-list.component';\r\nimport {DepartureListRoutingModule} from './departure-list-routing.module';\r\nimport {AddDepartureModalComponent} from './add-departure-modal/add-departure-modal.component';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {MomentModule} from 'angular2-moment';\r\n\r\n\r\n@NgModule({\r\n    imports: [CommonModule, DepartureListRoutingModule, PageHeaderModule, TranslateModule, NgbModule.forRoot(), FormsModule, MomentModule],\r\n    declarations: [DepartureListComponent, AddDepartureModalComponent],\r\n    entryComponents: [AddDepartureModalComponent]\r\n})\r\nexport class DepartureListModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/layout/departure-list/departure-list.module.ts","import {Injectable} from '@angular/core';\r\n\r\nimport 'rxjs/add/operator/map';\r\n\r\nimport {LocalClientStorage} from '../storage/LocalClientStorage';\r\n\r\n@Injectable()\r\nexport class StorageService {\r\n    private _clientStorage: IClientStorage;\r\n\r\n    constructor() {\r\n        this._clientStorage = new LocalClientStorage();\r\n    }\r\n\r\n    SetLocalData(key: string, data: string) {\r\n        this._clientStorage.SetData(key, data);\r\n    }\r\n\r\n    GetLocalData(key: string): string {\r\n        return this._clientStorage.GetData(key);\r\n    }\r\n\r\n    GetLocalAsBoolean(key: string): boolean {\r\n        return this._clientStorage.GetAsBoolean(key);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/shared/services/StorageService.ts","\r\nexport class LocalClientStorage implements IClientStorage {\r\n    GetData(key: string): string {\r\n        const data = localStorage.getItem( key );\r\n        return data;\r\n    }\r\n\r\n    SetData(key: string, data: string) {\r\n        localStorage.setItem(key, data);\r\n    }\r\n\r\n    GetAsBoolean( key: string): boolean {\r\n        const data = localStorage.getItem( key );\r\n        if ( data === 'true') {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/andreygolubkow/WebstormProjects/OperatorApp/src/app/shared/storage/LocalClientStorage.ts"],"sourceRoot":"webpack:///"}